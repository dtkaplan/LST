<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run the left side of the pipeline multiple times. — trials • LSTbook</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run the left side of the pipeline multiple times. — trials"><meta name="description" content="Write a pipeline to perform some calculation whose result can
be coerced into one line of a data frame. Add trials(times=3) to the end
of the pipeline in order to repeat the calculation multiple times. Typically,
each trial involves some random component, but another (or an additional)
capability is to parameterize the pipeline expression by including some
unbound variable in it, e.g. lambda. Then call trials(lambda=c(10,20)) to
repeat the calculation for each of the elements of the named parameter."><meta property="og:description" content="Write a pipeline to perform some calculation whose result can
be coerced into one line of a data frame. Add trials(times=3) to the end
of the pipeline in order to repeat the calculation multiple times. Typically,
each trial involves some random component, but another (or an additional)
capability is to parameterize the pipeline expression by including some
unbound variable in it, e.g. lambda. Then call trials(lambda=c(10,20)) to
repeat the calculation for each of the elements of the named parameter."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">LSTbook</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/LSTbook.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/DAGs.html">Simulating data with Directed Acyclic Graphs</a></li>
    <li><a class="dropdown-item" href="../articles/modeling.html">Training models</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dtkaplan/LSTbook/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Run the left side of the pipeline multiple times.</h1>
      <small class="dont-index">Source: <a href="https://github.com/dtkaplan/LSTbook/blob/master/R/trials.R" class="external-link"><code>R/trials.R</code></a></small>
      <div class="d-none name"><code>trials.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Write a pipeline to perform some calculation whose result can
be coerced into one line of a data frame. Add <code>trials(times=3)</code> to the end
of the pipeline in order to repeat the calculation multiple times. Typically,
each trial involves some random component, but another (or an additional)
capability is to parameterize the pipeline expression by including some
unbound variable in it, e.g. <code>lambda</code>. Then call <code>trials(lambda=c(10,20))</code> to
repeat the calculation for each of the elements of the named parameter.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">trials</span><span class="op">(</span><span class="va">.ex</span>, times <span class="op">=</span> <span class="fl">1</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--ex">.ex<a class="anchor" aria-label="anchor" href="#arg--ex"></a></dt>
<dd><p>(Not user-facing.) The left side of the pipeline.</p></dd>


<dt id="arg-times">times<a class="anchor" aria-label="anchor" href="#arg-times"></a></dt>
<dd><p>The number of times to run the trial.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Values for any unbound parameter in the left side of the pipeline. If a
vector of length &gt; 1, the trials will be run separately for each element of the vector.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a dataframe with one row for each trial. (But see the ... argument.)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This is intended as a pipeline friendly replacement for <code>mosaic::do()</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">trials</span><span class="op">(</span>times<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...2`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...2`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...2`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .trial       ...2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1  0.1355040</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      2  0.7796057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      3 -0.1295242</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">lambda</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">trials</span><span class="op">(</span>lambda<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span>, <span class="fl">10000</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .trial lambda         ...3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1      1  1.078517525</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1    100  0.027760336</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1  10000 -0.005564744</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">lambda</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">trials</span><span class="op">(</span>times<span class="op">=</span><span class="fl">5</span>, lambda<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span>, <span class="fl">10000</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...3`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    .trial lambda         ...3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       1      1 -0.546449966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       2      1  0.604958074</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       3      1  0.500036123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       4      1  0.388217185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       5      1  0.852351189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       1    100 -0.084561838</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       2    100 -0.068460779</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       3    100 -0.154239487</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       4    100 -0.060918370</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      5    100 -0.186271712</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      1  10000  0.007646683</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      2  10000 -0.020246237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      3  10000  0.008982420</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      4  10000  0.002411333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      5  10000  0.015156344</span>
<span class="r-in"><span><span class="fu"><a href="take_sample.html">take_sample</a></span><span class="op">(</span><span class="va">mtcars</span>, n<span class="op">=</span><span class="va">lambda</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">select</span><span class="op">(</span><span class="va">mpg</span>, <span class="va">hp</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="model_train.html">model_train</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="fu"><a href="take_sample.html">resample</a></span><span class="op">(</span><span class="va">hp</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="regression_summaries.html">regression_summary</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">trials</span><span class="op">(</span>times<span class="op">=</span><span class="fl">3</span>, lambda<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">term</span> <span class="op">==</span> <span class="st">"resample(hp)"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The `tidy()` method for objects of class `model_object` is not maintained by the broom team, and is only supported through the `lm` tidier method. Please be cautious in interpreting and reporting broom output.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">This warning is displayed once per session.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .trial lambda         term     estimate  std.error  statistic     p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1     10 resample(hp)  0.098746917 0.02432590  4.0593329 0.003636804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      2     10 resample(hp) -0.045460777 0.03585710 -1.2678318 0.240511254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      3     10 resample(hp) -0.081086576 0.04491934 -1.8051596 0.108692294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1     20 resample(hp) -0.015708407 0.04168843 -0.3768050 0.710723785</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2     20 resample(hp) -0.010002710 0.01836100 -0.5447803 0.592590854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      3     20 resample(hp)  0.012678416 0.01519494  0.8343843 0.415001324</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      1     40 resample(hp)  0.007472809 0.01342789  0.5565139 0.581122395</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      2     40 resample(hp) -0.012123982 0.01830818 -0.6622168 0.511828733</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3     40 resample(hp) -0.029782613 0.01142542 -2.6066978 0.012988264</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Kaplan, Randall Pruim.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

